;;;
;;; first, load a number of LKB-specific settings; typically no need to look
;;; too closely here
;;;
(lkb-load-lisp (parent-directory) "Version.lsp" t)
(setf *grammar-directory* (parent-directory))
(lkb-load-lisp (this-directory) "globals.lsp")
(lkb-load-lisp (this-directory) "user-fns.lsp")
(load-lkb-preferences (this-directory) "user-prefs.lsp")
;;;
;;; optionally, load set of irregular morphological patterns
;;;
(load-irregular-spellings (lkb-pathname (parent-directory) "irregs.tab"))
;;;
;;; now the core grammar: to preserve the fiction of separating the matrix 
;;; from language-specific parts, we recommend at least on additional files;
;;; larger grammars have ended up organizing files by content, kind of; e.g.
;;; fundamental types (similar to what comes with the matrix already), types
;;; for construction, lexical types, semantic types et al.
;;;
(read-tdl-type-files-aux
  (list 
   (lkb-pathname (parent-directory) "matrix.tdl")
   (lkb-pathname (parent-directory) "norsk.tdl")))

;;;
;;; next, the lexicon itself, instantiating (lexical) types of the grammar
;;; s(ome grammars with larger lexica organize them into multiple files).
;;;
(read-cached-lex-if-available (lkb-pathname (parent-directory) "lexicon.tdl"))

;;;
;;; finally, the grammar rules, lexical rules (given special treatment in the
;;; parser int hat they can apply _prior_ to `inflectional' rules), and the
;;; `inflectional' rules themselves (rules with an associated orthographemic
;;; alternation of the surface string).
;;;
(read-tdl-grammar-file-aux (lkb-pathname (parent-directory) "rules.tdl"))
(read-tdl-lex-rule-file-aux (lkb-pathname (parent-directory) "lrules.tdl"))
(read-morph-file-aux (lkb-pathname (parent-directory) "irules.tdl"))

;;;
;;; the `start symbol(s)' of the grammar
;;;
(read-tdl-psort-file-aux (lkb-pathname (parent-directory) "roots.tdl"))

;;;
;;; optionally, a set of types providing labels for nodes in parse trees
;;;
(read-tdl-parse-node-file-aux (lkb-pathname (parent-directory) "labels.tdl"))

;;;
;;; a few moer LKB-specific settings, this time for MRS post-processing
;;;
(lkb-load-lisp (this-directory) "mrs-initialization.lsp" t)
