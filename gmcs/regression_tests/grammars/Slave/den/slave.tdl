;;; -*- Mode: TDL; Coding: utf-8 -*-
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; Grammar of Slave
;;; created at:
;;;     Wed Jan 24 04:50:22 UTC 2018
;;; based on Matrix customization system version of:
;;;     unknown time
;;;
;;; 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

; Type assigning empty mod list. Added to basic types for nouns, verbs and determiners.

non-mod-lex-item := lex-item &
  [ SYNSEM.LOCAL.CAT.HEAD.MOD < > ].

;;;;;;;;;;;;;;;;;;;;;;;;;
;;; Matrix Type Addenda
;;;;;;;;;;;;;;;;;;;;;;;;;

inflected :+ [ DEIXIS-FLAG luk,
    SUBJECT-FLAG luk,
    MODE-FLAG luk,
    INCORPORATED-POSTPOSITION-FLAG luk,
    POSTPOS-OBJECT-FLAG luk ].

infl-satisfied :+ [ DEIXIS-FLAG na-or-+,
    SUBJECT-FLAG na-or-+,
    MODE-FLAG na-or-+,
    INCORPORATED-POSTPOSITION-FLAG na-or-+,
    POSTPOS-OBJECT-FLAG na-or-+ ].

basic-head-comp-phrase :+ [ SYNSEM.LOCAL.CAT.MC #mc,
    HEAD-DTR.SYNSEM.LOCAL.CAT.MC #mc ].

basic-head-opt-subj-phrase :+ [ HEAD-DTR.SYNSEM.LOCAL.CAT.VAL.COMPS < > ].

;;;;;;;;;;;;;;;;;;;
;;; Lexical Types
;;;;;;;;;;;;;;;;;;;

;;; Nouns

noun-lex := basic-noun-lex & basic-one-arg & no-hcons-lex-item & non-mod-lex-item &
  [ ARG-ST < #spr >,
    SYNSEM.LOCAL.CAT.VAL [ COMPS < >,
                           SUBJ < >,
                           SPEC < >,
                           SPR < #spr &
                                 [ LOCAL.CAT.HEAD det,
                                   OPT + ] > ] ].

noun-noun-lex := noun-lex.

;;; Verbs

verb-lex := basic-verb-lex & non-mod-lex-item & adverbial-rule-dtr & aspect-rule-dtr & conjugation-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & mode-rule-dtr & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr & subject-rule-dtr & theme-rule-dtr &
  [ SYNSEM.LOCAL [ CAT.VAL [ SPR < >,
                             SPEC < >,
                             SUBJ < #subj > ],
                   CONT.HOOK.XARG #xarg ],
    ARG-ST.FIRST #subj &
                 [ LOCAL [ CAT cat-sat &
                               [ VAL [ SPR < >,
                                       COMPS < > ] ],
                           CONT.HOOK.INDEX #xarg ] ],
    INFLECTED [ INCORPORATED-POSTPOSITION-FLAG na-or--,
                MODE-FLAG -,
                SUBJECT-FLAG - ] ].

intransitive-verb-lex := verb-lex & intransitive-lex-item &
  [ SYNSEM.LOCAL.CAT.VAL.COMPS < >,
    ARG-ST.FIRST.LOCAL.CAT.HEAD noun ].

transitive-verb-lex := verb-lex & transitive-lex-item &
  [ SYNSEM.LOCAL.CAT.VAL.COMPS < #comps >,
    ARG-ST < [ LOCAL.CAT.HEAD noun ],
             #comps &
             [ LOCAL.CAT cat-sat &
                         [ VAL [ SPR < >,
                                 COMPS < > ],
                           HEAD noun ] ] > ].

verb1-verb-lex := intransitive-verb-lex.

verb2-verb-lex := transitive-verb-lex.

;;; Complementizers

;;;;;;;;;;;;;;;;;;;
;;; Lexical Rules
;;;;;;;;;;;;;;;;;;;

;;; Intermediate rule types

customary-or-distributive-rule-dtr := word-or-lexrule.
object-rule-dtr := word-or-lexrule.
incorporated-stem-rule-dtr := word-or-lexrule.
mode-rule-dtr := word-or-lexrule.
deixis-rule-dtr := word-or-lexrule.
theme-rule-dtr := word-or-lexrule.
subject-rule-dtr := word-or-lexrule.
conjugation-rule-dtr := word-or-lexrule.
negation-rule-dtr := word-or-lexrule.
postpos-object-rule-dtr := word-or-lexrule.
number-rule-dtr := word-or-lexrule.
aspect-rule-dtr := word-or-lexrule.
incorporated-postposition-rule-dtr := word-or-lexrule.
adverbial-rule-dtr := word-or-lexrule.

;;; Lexical rule types

classifier-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & aspect-rule-dtr & conjugation-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & mode-rule-dtr & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr & subject-rule-dtr & theme-rule-dtr &
  [ INFLECTED #infl,
    DTR verb-lex &
        [ INFLECTED #infl ] ].

reciprocal-lex-rule := classifier-lex-rule-super.

subject-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & aspect-rule-dtr & conjugation-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & mode-rule-dtr & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr & theme-rule-dtr &
  [ INFLECTED [ SUBJECT-FLAG +,
                POSTPOS-OBJECT-FLAG #postpos-object,
                DEIXIS-FLAG #deixis,
                INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                MODE-FLAG #mode ],
    DTR subject-rule-dtr &
        [ INFLECTED [ POSTPOS-OBJECT-FLAG #postpos-object,
                      DEIXIS-FLAG #deixis,
                      INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                      MODE-FLAG #mode ] ] ].

1SG-SUBJ-lex-rule := infl-lex-rule & subject-lex-rule-super.

1PL-SUBJ-lex-rule := infl-lex-rule & subject-lex-rule-super.

3-SUBJ-lex-rule := const-lex-rule & subject-lex-rule-super.

mode-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & aspect-rule-dtr & conjugation-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr & theme-rule-dtr &
  [ INFLECTED [ MODE-FLAG +,
                POSTPOS-OBJECT-FLAG #postpos-object,
                DEIXIS-FLAG #deixis,
                INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                SUBJECT-FLAG #subject ],
    DTR mode-rule-dtr &
        [ INFLECTED [ POSTPOS-OBJECT-FLAG #postpos-object,
                      DEIXIS-FLAG #deixis,
                      INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                      SUBJECT-FLAG #subject ] ] ].

perfective-lex-rule := infl-lex-rule & mode-lex-rule-super.

imperfective-lex-rule := const-lex-rule & mode-lex-rule-super.

conjugation-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & aspect-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr & theme-rule-dtr &
  [ INFLECTED #infl,
    DTR conjugation-rule-dtr &
        [ INFLECTED #infl ] ].

yconj-lex-rule := conjugation-lex-rule-super.

wconj-lex-rule := conjugation-lex-rule-super.

aspect-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr & theme-rule-dtr &
  [ INFLECTED #infl,
    DTR aspect-rule-dtr &
        [ INFLECTED #infl ] ].

inceptive-lex-rule := aspect-lex-rule-super.

serative-lex-rule := aspect-lex-rule-super.

theme-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & customary-or-distributive-rule-dtr & deixis-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR theme-rule-dtr &
        [ INFLECTED #infl ] ].

theme1-lex-rule := theme-lex-rule-super.

deixis-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & customary-or-distributive-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & negation-rule-dtr & number-rule-dtr & object-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED [ DEIXIS-FLAG +,
                POSTPOS-OBJECT-FLAG #postpos-object,
                INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                MODE-FLAG #mode,
                SUBJECT-FLAG #subject ],
    DTR deixis-rule-dtr &
        [ INFLECTED [ POSTPOS-OBJECT-FLAG #postpos-object,
                      INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                      MODE-FLAG #mode,
                      SUBJECT-FLAG #subject ] ] ].

3PL-lex-rule := deixis-lex-rule-super.

object-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & customary-or-distributive-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & negation-rule-dtr & number-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR object-rule-dtr &
        [ INFLECTED #infl ] ].

3SG-lex-rule := object-lex-rule-super.

1SG-OBJ-lex-rule := object-lex-rule-super.

reciprocal-object-lex-rule := object-lex-rule-super.

number-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & customary-or-distributive-rule-dtr & incorporated-postposition-rule-dtr & incorporated-stem-rule-dtr & infl-lex-rule & negation-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR number-rule-dtr &
        [ INFLECTED #infl &
                    [ DEIXIS-FLAG na ] ] ].

dual-lex-rule := number-lex-rule-super.

incorporated-stem-lex-rule-super := add-only-no-ccont-rule & adverbial-rule-dtr & customary-or-distributive-rule-dtr & incorporated-postposition-rule-dtr & infl-lex-rule & negation-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR incorporated-stem-rule-dtr &
        [ INFLECTED #infl ] ].

laugh-lex-rule := incorporated-stem-lex-rule-super.

customary-lex-rule := add-only-no-ccont-rule & adverbial-rule-dtr & incorporated-postposition-rule-dtr & infl-lex-rule & negation-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR customary-or-distributive-rule-dtr &
        [ INFLECTED #infl ] ].

distributive-lex-rule := add-only-no-ccont-rule & adverbial-rule-dtr & incorporated-postposition-rule-dtr & infl-lex-rule & negation-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR customary-or-distributive-rule-dtr &
        [ INFLECTED #infl ] ].

adverbial-lex-rule-super := add-only-no-ccont-rule & incorporated-postposition-rule-dtr & infl-lex-rule & negation-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED #infl,
    DTR adverbial-rule-dtr &
        [ INFLECTED #infl ] ].

avbl1-lex-rule := adverbial-lex-rule-super.

incorporated-postposition-lex-rule-super := add-only-no-ccont-rule & infl-lex-rule & negation-rule-dtr & postpos-object-rule-dtr &
  [ INFLECTED [ INCORPORATED-POSTPOSITION-FLAG +,
                POSTPOS-OBJECT-FLAG -,
                DEIXIS-FLAG #deixis,
                MODE-FLAG #mode,
                SUBJECT-FLAG #subject ],
    DTR incorporated-postposition-rule-dtr &
        [ INFLECTED [ DEIXIS-FLAG #deixis,
                      MODE-FLAG #mode,
                      SUBJECT-FLAG #subject ] ] ].

into-lex-rule := incorporated-postposition-lex-rule-super.

postpos-object-lex-rule-super := add-only-no-ccont-rule & infl-lex-rule & negation-rule-dtr &
  [ INFLECTED [ POSTPOS-OBJECT-FLAG +,
                DEIXIS-FLAG #deixis,
                INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition,
                MODE-FLAG #mode,
                SUBJECT-FLAG #subject ],
    DTR postpos-object-rule-dtr &
        [ INFLECTED [ DEIXIS-FLAG #deixis,
                      INCORPORATED-POSTPOSITION-FLAG #incorporated-postposition & +,
                      MODE-FLAG #mode,
                      SUBJECT-FLAG #subject ] ] ].

3-POSTPOS-OBJ-lex-rule := postpos-object-lex-rule-super.

negation-lex-rule := add-only-no-ccont-rule & infl-lex-rule &
  [ INFLECTED #infl,
    DTR negation-rule-dtr &
        [ INFLECTED #infl ] ].

;;;;;;;;;;;;;;;;;;;
;;; Phrasal Types
;;;;;;;;;;;;;;;;;;;

;Constraint on MC used to be part of matrix.tdl
;;it applies to all wo implementations, except for v2

comp-head-phrase := basic-head-1st-comp-phrase & head-final.

subj-head-phrase := decl-head-subj-phrase & head-final &
  [ HEAD-DTR.SYNSEM.LOCAL.CAT.VAL.COMPS < > ].

; Bare NP phrase.  Consider modifying the PRED value of the quantifier relation
; introduced to match the semantic effect of bare NPs in your language.

bare-np-phrase := basic-bare-np-phrase &
  [ C-CONT.RELS <! [ PRED "exist_q_rel" ] !> ].
