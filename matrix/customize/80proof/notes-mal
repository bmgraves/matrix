---
mal
---

Choices file doesn't validate, but doesn't leave any red stars.
Trying customize-one.py led to the system spinning.

Problem was disjunctive gender value on noun12: inanimate, non-rational.
Changed that to just inanimate, and got a grammar that loaded, but
with a cycle on non-rational, because noun10 still had that disjunctive
value.  Change that to just inanimate, and got on to next problem.

Cycle involving NOM-ACC-TRANSITIVE-VERB-LEX

Changed:

  verb1_name=nom-acc-transitive

to:

  verb1_name=nom-acc-trans

... and made similar changes for all the verb type names.

Grammar loads!

Coverage: 10/39 25.6%
Overgeneration: 2/37 5.4%
Errors: 29

Added stem for "read":

    verb1_stem2_orth=vaayi
    verb1_stem2_pred=_read_v_rel

Coverage: 10/39 25.6%
Overgeneration: 2/37 5.4%
Errors: 25

Changed spelling of one stem:

    noun1_stem3_orth=raamaan
    noun1_stem3_pred=_name_n_rel

    noun1_stem3_orth=raaman
    noun1_stem3_pred=_name_n_rel

Coverage: 10/39 25.6%
Overgeneration: 2/37 5.4%
Errors: 23

#56 not parsing because coordination is
not fully retrofitted to new morphotactics. In particular,
infl-bottom-coord-rule requires that the daughter be
[INFLECTED -], but the daughter in this case has
gone through a lexeme-to-word-rule.  

Added stem for "fall":

    verb2_stem2_orth=viiZ
    verb2_stem2_pred=_fall_v_rel

#58, 59 don't parse because affix-marked coordination
is not supported for phrases (NP, VP, S)

Something very puzzling here:

TSNLP(3): (lkb::do-parse-tty "atE cirikk-tu")
Error: 
Rule PAST_VERB returned from morph analyser is undefined (error in grammar
       loading?)

There is nothing called "past_verb" anywhere in the
.tdl, so I have now idea how the morph analyzer is getting
that. Even tried restarting the LKB to make sure it
wasn't left over from some other grammar.

Found the culprit: We'd left in an irregs.tab file initalized
with an example from English:

"
ate PAST_VERB eat
"

Not sure if it's legit to remove this or not.

Coverage: 10/39 25.6%
Overgeneration: 2/37 5.4%
Errors: 22

Problem with this example:

kuTTi amma-e viLi-ccu
child.nom mother-acc call-past
The child called the mother.


appears to be that the past tense rule is ltol, i.e.,
viLi-ccu is [INFLECTED -].

Fixed that by making verb-slot4 and verb-slot5 (negation
markers) optional.

  verb-slot4_opt=on
  verb-slot5_opt=on

Coverage 29/39 74.4%
Overgeneration 2/37 5.4%
Errors: 24

That seems to have introduced a new error for this example (#65):

kuTTi cirikk-uka-aaNe-irunnu
child.nom laugh-infinitive-imperfect-past
'The child was laughing.'

Item 14 wasn't parsing and furthermore was getting subj-head
and comp-head attachment for subject of intransitive verb.
Changed this:

  verb4_valence=trans

to this:

  verb4_valence=intrans

Coverage 30/39 76.9%
Overgeneration 2/37 5.4%
Errors: 24

Two ungrammatical examples parsing:

#Ex 36 demonstrates an ungrammatical use of tense.  Here the verb appears without the tense marker.
Source: author
Vetted: f
Judgment: u
Phenomena: {tam}
kuTTi cirikk
kuTTi cirikk
child.nom laugh
'The child laughs.'

--> The problem here is a bug in the morphotactics that
lead to tense-aspect-rule-dtr being a supertype of verb-lex,
despite nothing in the choices file indicating that.

#Ex 71 demonstrates ungrammatical present habitual.  It is formed by adding "-aaRE" and "-uNTE" to the verb stem.  Here they are attached to the present tense stem.
Source: author
Vetted: f
Judgment: u
Phenomena: {tam}
kuTTi cirikkunnaaRuNTaayirunnu
kuTTi cirikk-unnu-aaRE-uNTE
child.nom laugh-pres-hab-hab.pres
'The child was laughing.'

--> This one we might be able to fix, since there
seem to be two ways of doing -aaRe-uNTe, all at once
or in two pieces.

SS--I loaded the grammar and received an error for the imperfective-marker-rule.  The error stated there was a strange character.  I checked irules.tdl and noticed an
extra space.  I removed the space and reloaded the grammar without errors.

Trying to fix the problems with Ex 71, 66, 69, 70, I removed the second morpheme -aaRE-uNTe from the faked-tense-aspect-marker slot and created a new slot for it that takes any verb as an input.  The new grammar has slightly improved coverage.

Coverage 79.5%
Overgeneration 2.7%

Ex 71 was eliminated
Ex 66 parsed

I think that the problem with #69 and #70 is that I did not update the tense-aspect 
slot to have the new slot as input.

Coverage 84.6%
Overgeneration 2.7%

I think that this is the most that we will be able to do.

08/06/2009 EVALUATION:
First run: repoduced results from scorecard

MRSs: Look good except for example 53:
Coordination is marked twice in the MRS, once with the correct arguments, once without anything. Need to check where this is coming from in malayam.tdl file.

ungrammatical examples that are not parsing: all for correct reasons, except:
60,61,62: do not parse, because suffixes to VPs and Ss are not supported. Restrictions on specific verb forms, etc. can to my knowledge not be dealt with for coordination, in the current customization system.
67-68: In my opinion, these examples are not really testing anything under the current 'choices': since the two affixes are added as if they were one (kind of a hack, I guess), we are simply testing whether the system rejects a sequence that is a subset of an affix. This feels a bit like cheating to reduce the overgeneration percentage.
19: I'm not sure, it depends: can inanimates not occur with accusative at all, or just not when functioning as a direct object?
24: Also hard to tell why it is not parsing: we would need a grammatical plural example to compare.

overgeneration: example 36, see explanation above.

undergeneration: example 47, not sure what is supposed to happen (could be data error).
32: 'ate'-bug
56,58,59: problem that np,vp and s coordination are not supported. Several things to note here: 1. old requirement that suffix can only attach to inflected - (seems silly), 2. system does not support 'phrasal' affixes 3. requirements such as 'must attach of verb of such and such form, auxiliary required' are not supported.
65: Past-marker cannot take a form that is inflected + (which imperfective assigns). I can't find attempts to solve this in the notes, so maybe we want to have another look at this? 

spurious ambiguity: the coordination affix can attach either directly to the noun-stem or to the noun after the applying the const-lex-rule "singular agreement". This can be seen as similar to the problem of affix-marked coordination in general: it is not interacting with the morphology done elsewhere.

Things to look at: example 13, not parsing because of wrong reason, but I'm guessing a typo. 
 
Example 13: confirmed to be a typo. Now not parsing because of right reasons.

08/13 
65: The problem is related to the ordering of morphemes: if the past-marker is defined before the optional negation marker, the example parses, but #49 does not. If the past-marker is defined later than the optional negation marker (partially standing in the same position), it needs an INFLECTED + argument (this looks like a bug in the morphology code to me). If the negation marker is defined later, then this marker no longer creates an INFLECTED + form, preventing the verb from combining with its complement. 
Changing the order of defining the morphemes can break more structures, though one variant only breaks #49, let's see if we can introduce a hack by defining a slot that only takes the negation marker as daughter and renders the verb inflected +.

Hack works, so now coverage is 34/39, i.e. 87.2%. The hack and explanation of morphology bug should probably be mentioned in the paper, though.

#19 is not excluded for the right reasons: in our grammar inanimates cannot take accusative. The reason for this 'wrong' analysis is that this phenomenon simply has not been added yet to the customization system.

#24 is not excluded for the right reasons: the plural form is not inflected, it seems that this should be fixable though. Trying to adapt choices file accordingly
Problem was that plural nouns could not take case, fixed by adding plural slot to case markers (only animate case for now, since no inanimate examples). Added feature to determiner that pernum = 3rd-singular. Now 24 fails for the right reasons.

Adding this optional rule as input for case marking introduced spurious ambiguity. I made the number marking obligatory, and the input of animate case markers a number marked noun. Spurious ambiguity remained, and strangely only left when I removed:
  noun_slot2_input2=noun3
 
This most definitely seems like a bug, I'm not sure why noun3 (1sg pronouns) was a possible input for this slot, there are no examples in the test suite.
If they must be able to take these case markings though, we'll need to add an additional slot especially for them.

SUMMARY OF RESULTS:
 
Parsing coverage: 34/39  (87.2%)
Treebank coverage: 33/39 (84.6%)  (MRS-coordination)
Overgeneration: 1/37 (2.7%)
Not parsing for wrong reasons: 4/37 (10.8%)
In three cases (#60-#62) because affixal coordination does not work in the first place, in one case (#19) because the phenomenon in question (a specific noun bears different case when it occurs as an object) is not handled by the customization system yet.
In my opinion, #67-#68 are not really being tested with the current choices file (see explanation above), adapt?

Explanations of undergeneration:
undergeneration: example 47, not sure what is supposed to happen (could be data error).
32: 'ate'-bug
56,58,59: problem that np,vp and s coordination are not supported. Several things to note here: 1. old requirement that suffix can only attach to inflected - (seems silly), 2. system does not support 'phrasal' affixes 3. requirements such as 'must attach of verb of such and such form, auxiliary required' are not supported.
 
8/17/2009 Safiyyah's responses to Antske's questions

#47: the description points to #46, where the negation marker is attached to the infinitive marker. What is #47 testing? An additional tense with negation? Or is it an ungrammatical example of missing tense/infinitive marker?

The negative future can be formed by adding "-lla" to the verb stem or to the infinitive.  #47 tests the former and #46 tests the latter.  The reference grammar does not give any semantic difference between the two forms.  It only mentions that the shorter form (attaching to the verb stem) is used in colloquial language.

I added another line to the explanation in the test suite that, hopefully, makes this clearer. 

8/20/2009 ASF

Since #47 is grammatical, I made -uka (infinitive marker) optional in 'choices'. This seems to reflect the appropriate behavior,
and #47 is now parsed.

FINAL RESULTS



Coverage: 89.7%, Treebank coverage: 87.2%
Overgeneration: 2.8%, Correctness Failure: 88.6%
Overall performance Ungrammatical examples: 86.1%
Spurious Ambiguity: 1 example with 4 parses.
Total number of examples: 75
Grammatical: 39
Ungrammatical: 37 - 1 (43 and 67 are identical) = 36

Phenomenon based analysis:

Word Order (#1-#6, #21-22):     +
Case             (#7-#20):      -
Det/Definiteness (#21-#24):     +
Pers/Nr/Gen      (#25-#34):     +
Tense/Aspect     (#35-#45):     +
Negation         (#46-#52):     +
Yes-No Questions (#53):         +
Coordination np  (#54-#61):     -
s-coord                         -
vp-coord                        -
Morphology (#35-#45,#62-#76):   + 
Agreement        (#24):         n.a.
Agreement obj                   n.a.
Auxiliaries                     n.a.

Total:  7/11 phenomena: 80%

Maybe "determiner" and "agreement" should be counted as one in this case.
I separated them, because one of the other grammars has affixes for determiners,
and this does not work.
Case mostly works, but we cannot deal with nouns that have different case marking in a specific function only. The count is thus strict: if part of the phenomenon does not work, it gets a -.
Coordination does not work at all: the only form that works gets an incorrect semantic representation, and has spurious ambiguity. Ungrammatical examples are excluded for the wrong reasons, and could not be excluded for the right ones.
